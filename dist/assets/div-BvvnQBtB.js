import{r as i,j as e,L as v}from"./index-BxeYf06N.js";import{a as u,b as w}from"./index.esm-CJR-izqj.js";import{a as P,S as o}from"./sweetalert2.esm.all-CYPmnruj.js";import{C as B,a as A}from"./CCardBody-9-TyJ2V3.js";import{C as F}from"./CCardHeader-DIYaTK_F.js";import{C as k,a as n}from"./CRow-B_r9SPmL.js";import{c as H}from"./cil-plus-D8mtC-W5.js";import{C as R}from"./CFormInput-Diq7Y-91.js";import{C as z,a as I,b as y,c,d as O,e as l}from"./CTable-DENMha1t.js";import{c as Y,C as $,a as f}from"./cil-pen-DBGMq91X.js";import{c as M}from"./cil-trash-CBbKHhHb.js";import{C as _}from"./CCardFooter-C36i01Xm.js";const re=()=>{const[D,T]=i.useState([]),[d,L]=i.useState(""),[q,p]=i.useState(!0),[r,S]=i.useState(1),h=10,g=async()=>{p(!0);try{const s=await P.get("http://192.168.2.9:4001/divisi");s.data.status==="ok"&&T(s.data.data)}catch(s){console.error("Error fetching data:",s)}finally{p(!1)}};i.useEffect(()=>{g()},[]);const m=D.filter(s=>{var a;return s.nama.toLowerCase().includes(d.toLowerCase())||((a=s.lokasis)==null?void 0:a.nama.toLowerCase().includes(d.toLowerCase()))}),x=r*h,C=x-h,N=m.slice(C,x),b=Math.ceil(m.length/h),E=s=>{o.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!"}).then(a=>{a.isConfirmed&&P.delete(`http://192.168.2.9:4001/divisi/${s}`).then(t=>{t.data.status==="ok"?(o.fire("Deleted!",t.data.message,"success"),g()):o.fire("Error",t.data.message,"error")}).catch(()=>{o.fire("Error","Failed to delete category","error")})})},j=s=>{S(s)};return e.jsxs(B,{className:"mb-4",children:[e.jsx(F,{children:e.jsx("h5",{children:"Data Divisi"})}),e.jsxs(A,{children:[e.jsxs(k,{className:"mb-3",children:[e.jsx(n,{children:e.jsxs(v,{to:"/div/add",className:"btn btn-primary",children:[e.jsx(u,{icon:H,className:"me-2"}),"Add Divisi"]})}),e.jsx(n,{xs:"auto",children:e.jsx(R,{type:"text",placeholder:"Search",value:d,onChange:s=>L(s.target.value)})})]}),e.jsxs(z,{hover:!0,striped:!0,bordered:!0,responsive:!0,children:[e.jsx(I,{children:e.jsxs(y,{children:[e.jsx(c,{children:"No."}),e.jsx(c,{children:"Nama"}),e.jsx(c,{children:"Lokasi"}),e.jsx(c,{children:"Action"})]})}),e.jsx(O,{children:N.map((s,a)=>{var t;return e.jsxs(y,{children:[e.jsx(l,{children:C+a+1}),e.jsx(l,{children:s.nama}),e.jsx(l,{children:(t=s.lokasis)==null?void 0:t.nama}),e.jsxs(l,{children:[e.jsx(v,{to:`/div/edit/${s.id}`,children:e.jsx(w,{color:"info",size:"sm",children:e.jsx(u,{icon:Y})})}),e.jsxs(w,{color:"danger",size:"sm",className:"ms-2",onClick:()=>E(s.id),children:[e.jsx(u,{icon:M})," "]})]})]},a)})})]}),e.jsx(_,{children:e.jsxs(k,{children:[e.jsx(n,{children:e.jsxs("div",{children:["Showing ",C+1," to ",x," of ",m.length," entries"]})}),e.jsx(n,{xs:"auto",children:e.jsxs($,{"aria-label":"Page navigation example",children:[e.jsx(f,{disabled:r===1,onClick:()=>j(r-1),children:"Previous"}),[...Array(b)].map((s,a)=>e.jsx(f,{active:r===a+1,onClick:()=>j(a+1),children:a+1},a)),e.jsx(f,{disabled:r===b,onClick:()=>j(r+1),children:"Next"})]})})]})})]})]})};export{re as default};
