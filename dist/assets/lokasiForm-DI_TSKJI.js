import{u as g,a as N,r as m,j as a}from"./index-BxeYf06N.js";import{u as S,c as b}from"./index.esm-BpJkeHwm.js";import{a as c,S as r}from"./sweetalert2.esm.all-CYPmnruj.js";import{b as d,a as f}from"./index.esm-CJR-izqj.js";import{C as y,a as L}from"./CCardBody-9-TyJ2V3.js";import{C as E}from"./CCardHeader-DIYaTK_F.js";import{C as v}from"./CForm-Bau54mqM.js";import{C as u,a as l}from"./CRow-B_r9SPmL.js";import{C as F}from"./CFormInput-Diq7Y-91.js";import{c as w}from"./cil-save-CHBg7z_U.js";const V=()=>{const{id:s}=g(),t=N(),{register:h,handleSubmit:x,setValue:p,formState:{errors:n}}=S(),[j,o]=m.useState(!1),C=()=>{o(!0),c.get(`http://192.168.2.9:4001/lokasi/${s}`).then(e=>{if(e.data.status==="ok"){const i=e.data.data;p("nama",i.nama)}else r.fire("Error",e.data.message,"error"),t(-1)}).catch(()=>{r.fire("Error","Oops.. Something Wrong!","error"),t(-1)}).finally(()=>o(!1))},k=e=>{o(!0),s?c.put(`http://192.168.2.9:4001/lokasi/${s}`,e).then(i=>{r.fire("Success",i.data.message,"success"),t("/lokasi")}).catch(()=>{r.fire("Error","Failed to update Lokasi","error")}).finally(()=>o(!1)):c.post("http://192.168.2.9:4001/lokasi",e).then(i=>{r.fire("Success",i.data.message,"success"),t("/lokasi")}).catch(()=>{r.fire("Error","Failed to create Lokasi","error")}).finally(()=>o(!1))};return m.useEffect(()=>{s&&C()},[s]),a.jsxs(y,{children:[a.jsx(E,{children:a.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[a.jsx("h5",{children:s?"Edit Lokasi":"Add New Lokasi"}),a.jsxs(d,{color:"secondary",variant:"outline",onClick:()=>t(-1),children:[a.jsx(f,{icon:b,className:"me-2"})," Back"]})]})}),a.jsx(L,{children:a.jsxs(v,{onSubmit:x(k),children:[a.jsxs(u,{className:"mb-3",children:[a.jsx(l,{sm:2,children:a.jsx("label",{children:"Nama Lokasi"})}),a.jsxs(l,{sm:8,children:[a.jsx(F,{type:"text",placeholder:"Nama Lokasi",...h("nama",{required:"Nama Lokasi is required"})}),n.nama&&a.jsx("span",{className:"text-danger",children:n.nama.message})]})]}),a.jsx(u,{className:"mt-5",children:a.jsx(l,{className:"text-center",children:a.jsxs(d,{type:"submit",color:"primary",disabled:j,children:[a.jsx(f,{icon:w,className:"mx-2"})," Save"]})})})]})})]})};export{V as default};
