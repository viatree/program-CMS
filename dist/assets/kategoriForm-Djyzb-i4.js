import{u as N,a as y,r as h,j as e}from"./index-BxeYf06N.js";import{u as S,c as b}from"./index.esm-BpJkeHwm.js";import{a as l,S as t}from"./sweetalert2.esm.all-CYPmnruj.js";import{b as f,a as g}from"./index.esm-CJR-izqj.js";import{C as K,a as E}from"./CCardBody-9-TyJ2V3.js";import{C as v}from"./CCardHeader-DIYaTK_F.js";import{C as F}from"./CForm-Bau54mqM.js";import{C as m,a as c}from"./CRow-B_r9SPmL.js";import{C as u}from"./CFormInput-Diq7Y-91.js";import{c as q}from"./cil-save-CHBg7z_U.js";const P=()=>{const{id:a}=N(),o=y(),{register:d,handleSubmit:p,setValue:x,formState:{errors:n}}=S(),[j,i]=h.useState(!1),C=()=>{i(!0),l.get(`http://192.168.2.9:4001/kategori/${a}`).then(s=>{if(s.data.status==="ok"){const r=s.data.data;x("nama",r.nama),x("kode",r.kode)}else t.fire("Error",s.data.message,"error"),o(-1)}).catch(()=>{t.fire("Error","Oops.. Something Wrong!","error"),o(-1)}).finally(()=>i(!1))},k=s=>{i(!0),a?l.put(`http://192.168.2.9:4001/kategori/${a}`,s).then(r=>{t.fire("Success",r.data.message,"success"),o("/kategori")}).catch(()=>{t.fire("Error","Failed to update category","error")}).finally(()=>i(!1)):l.post("http://192.168.2.9:4001/kategori",s).then(r=>{t.fire("Success",r.data.message,"success"),o("/kategori")}).catch(()=>{t.fire("Error","Failed to create category","error")}).finally(()=>i(!1))};return h.useEffect(()=>{a&&C()},[a]),e.jsxs(K,{children:[e.jsx(v,{children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h5",{children:a?"Edit Kategori":"Add New Kategori"}),e.jsxs(f,{color:"secondary",variant:"outline",onClick:()=>o(-1),children:[e.jsx(g,{icon:b,className:"me-2"})," Back"]})]})}),e.jsx(E,{children:e.jsxs(F,{onSubmit:p(k),children:[e.jsxs(m,{className:"mb-3",children:[e.jsx(c,{sm:2,children:e.jsx("label",{children:"Nama Kategori"})}),e.jsxs(c,{sm:8,children:[e.jsx(u,{type:"text",placeholder:"Nama Kategori",...d("nama",{required:"Nama Kategori is required"})}),n.nama&&e.jsx("span",{className:"text-danger",children:n.nama.message})]})]}),e.jsxs(m,{className:"mb-3",children:[e.jsx(c,{sm:2,children:e.jsx("label",{children:"Kode Kategori"})}),e.jsxs(c,{sm:8,children:[e.jsx(u,{type:"text",placeholder:"Kode Kategori",...d("kode",{required:"Kode Kategori is required"})}),n.kode&&e.jsx("span",{className:"text-danger",children:n.kode.message})]})]}),e.jsx(m,{className:"mt-5",children:e.jsx(c,{className:"text-center",children:e.jsxs(f,{type:"submit",color:"primary",disabled:j,children:[e.jsx(g,{icon:q,className:"mx-2"})," Save"]})})})]})})]})};export{P as default};
